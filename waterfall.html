<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{
			margin:0;
			padding:0;
		}
		#main{
			position: absolute;
			left:0;
			top:0;
			bottom:0;
			right:0;
			margin:auto;
			background-color: #ddd;
			overflow: auto;
		}
		.item{
			border:1px solid #eee;
			margin:10px;
			background-color: #fff;
			float: left;
			box-shadow: 0 0 5px #ddd;
			padding:10px 10px 50px;
			position: absolute;
			transition: all 1s;

		}
		img{
			vertical-align: top;
			width:210px;
			display: block;
		}
	</style>
</head>
<body>
	<div id="main">
		<div class="item">
			<img src="img/01.jpg">
		</div>
		<div class="item">
			<img src="img/02.jpg">
		</div>
		<div class="item">
			<img src="img/03.jpg">
		</div>
		<div class="item">
			<img src="img/04.jpg">
		</div>
		<div class="item">
			<img src="img/05.jpg">
		</div>
		<div class="item">
			<img src="img/06.jpg">
		</div>
		<div class="item">
			<img src="img/07.jpg">
		</div>
		<div class="item">
			<img src="img/08.jpg">
		</div>
		<div class="item">
			<img src="img/09.jpg">
		</div>
		<div class="item">
			<img src="img/01.jpg">
		</div>
		<div class="item">
			<img src="img/02.jpg">
		</div>
		<div class="item">
			<img src="img/03.jpg">
		</div>
		<div class="item">
			<img src="img/04.jpg">
		</div>
		<div class="item">
			<img src="img/05.jpg">
		</div>
		<div class="item">
			<img src="img/06.jpg">
		</div>
		<div class="item">
			<img src="img/07.jpg">
		</div>
		<div class="item">
			<img src="img/08.jpg">
		</div>
		<div class="item">
			<img src="img/09.jpg">
		</div>
		<div class="item">
			<img src="img/01.jpg">
		</div>
		<div class="item">
			<img src="img/02.jpg">
		</div>
		<div class="item">
			<img src="img/03.jpg">
		</div>
		<div class="item">
			<img src="img/04.jpg">
		</div>
		<div class="item">
			<img src="img/05.jpg">
		</div>
		<div class="item">
			<img src="img/06.jpg">
		</div>
		<div class="item">
			<img src="img/07.jpg">
		</div>
		<div class="item">
			<img src="img/08.jpg">
		</div>
		<div class="item">
			<img src="img/09.jpg">
		</div>
		<div class="item">
			<img src="img/01.jpg">
		</div>
		<div class="item">
			<img src="img/02.jpg">
		</div>
		<div class="item">
			<img src="img/03.jpg">
		</div>
		<div class="item">
			<img src="img/04.jpg">
		</div>
		<div class="item">
			<img src="img/05.jpg">
		</div>
		<div class="item">
			<img src="img/06.jpg">
		</div>
		<div class="item">
			<img src="img/07.jpg">
		</div>
		<div class="item">
			<img src="img/08.jpg">
		</div>
		<div class="item">
			<img src="img/09.jpg">
		</div>
	</div>
</body>
</html>
<script>
	//设置main的宽度
	//获取main中的所有item元素；
	var main = document.getElementById("main");
	var items = main.children;

	// console.log(items.length);
	//获取图片盒子的宽度；
	var itemWidth = items[0].offsetWidth+20;
	//获取屏幕宽度
	waterFall()
	window.onresize = waterFall;

	function waterFall(){
		var screen = document.documentElement.clientWidth || window.innerWidth;
		var col = Math.floor(screen/itemWidth)
		console.log(col);
		main.style.width = col*itemWidth+'px';
		var colHeight = [];
		var minHeight=0;
		var minHeightIndex = 0;
		// console.log(colHeight);
		for(var i = 0;i<col;i++){
			colHeight.push(items[i].offsetHeight);
			items[i].style.left = i*itemWidth+"px";
			items[i].style.top = 0+"px";
		}
		
		for(var i =col;i<items.length;i++){
			minHeight = Math.min.apply(null,colHeight)
			minHeightIndex = colHeight.findIndex(function(item){
				return item == minHeight;
			});
			colHeight[minHeightIndex] += items[i].offsetHeight+20;
			items[i].style.left = minHeightIndex*itemWidth+"px";
			items[i].style.top = minHeight+20+"px";

		}
	}
	



</script>